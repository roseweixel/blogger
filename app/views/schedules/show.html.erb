<h1><%= @schedule.name %></h1>
<%= link_to 'back to cohort page', cohort_path(@schedule.cohort), class: "btn btn-default" %> 
<%= link_to 'edit this schedule', edit_cohort_schedule_path(@schedule.cohort, @schedule), class: "btn btn-default" %>
<%= link_to 'get new posts', get_new_posts_path(cohort_id: @schedule.cohort.id), class: 'btn btn-large btn-primary', method: 'post' %>
<br>
<br>
<p>
<strong>Cohort: </strong>
<%= @schedule.cohort.name %>
</p>

<p>
<strong>Start Date: </strong>
<%= @schedule.start_date.strftime("%m/%d/%Y") %>
</p>

<p>
<strong>End Date: </strong>
<%= @schedule.end_date.strftime("%m/%d/%Y") %>
</p>

<p>
Students should blog once every <%= @schedule.frequency %> days.
</p>

<%= form_tag(generate_blog_rotation_path(id: @schedule.id), {method: :post, class: 'form-inline'}) do %>
  <div class="form-group">
    <%= select_tag "priority", options_for_select(["select a priority", "consistent number of blogs per day", "adhere to specified frequency"], selected: flash[:priority] || "select a priority"), class: 'form-control' %>
    <%= submit_tag 'Generate Blog Rotation', class: 'btn btn-large btn-primary', id: 'generate' %>
  </div>
  <%= render 'set_blog_rotation', schedule: @schedule %>
<% end %>

<% @schedule.weekdays_that_arent_holidays.each do |day| %>
  <h3><%= day.strftime("%A, %m/%d") %></h3>
  <% @schedule.blog_assignments.where(due_date: day).each do |blog_assignment| %>
    <p>
      <strong>
      <%= render 'greenlight', blog_assignment: blog_assignment %> 
      <%= link_to blog_assignment.student.full_name_or_github_name, user_path(blog_assignment.user) %>:</strong>

      <%= blog_assignment.posts_since_previous.collect {|entry| (link_to entry.title, entry.url) + " (#{entry.published_date.strftime("%m/%d/%Y")})" }.to_sentence.html_safe %>
    <p>
  <% end %>
<% end %>
